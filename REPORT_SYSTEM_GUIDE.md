# ğŸ“Š Há»† THá»NG BÃO CÃO Tá»”NG Há»¢P - BUS BOOKING

## ğŸ¯ Tá»•ng quan

Há»‡ thá»‘ng bÃ¡o cÃ¡o cung cáº¥p 8 module bÃ¡o cÃ¡o chi tiáº¿t giÃºp quáº£n lÃ½ vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u toÃ n diá»‡n.

---

## ğŸ“‹ DANH SÃCH BÃO CÃO

### 1. ğŸ“Š **BÃ¡o cÃ¡o Tá»•ng há»£p** (`/admin/report`)

**Chá»©c nÄƒng:**

- Hiá»ƒn thá»‹ 8 box thá»‘ng kÃª tá»•ng quan há»‡ thá»‘ng
- Thá»‘ng kÃª thÃ¡ng hiá»‡n táº¡i (doanh thu, vÃ© bÃ¡n, ngÆ°á»i dÃ¹ng má»›i, bÃ¬nh luáº­n má»›i)
- Top 5 ngÆ°á»i dÃ¹ng Ä‘áº·t vÃ© nhiá»u nháº¥t
- Top 5 chuyáº¿n xe phá»• biáº¿n nháº¥t
- Menu Ä‘iá»u hÆ°á»›ng nhanh Ä‘áº¿n 8 bÃ¡o cÃ¡o khÃ¡c

**Dá»¯ liá»‡u:**

- Tá»•ng ngÆ°á»i dÃ¹ng
- Tá»•ng Ä‘áº·t vÃ©
- Tá»•ng chuyáº¿n xe
- Tá»•ng nhÃ  xe
- Tá»•ng doanh thu
- Tá»•ng bÃ¬nh luáº­n
- Tá»•ng liÃªn há»‡
- Doanh thu thÃ¡ng nÃ y

---

### 2. ğŸ« **BÃ¡o cÃ¡o Äáº·t vÃ©** (`/admin/report/bookings`)

**Chá»©c nÄƒng:**

- Bá»™ lá»c theo khoáº£ng thá»i gian (tá»« ngÃ y - Ä‘áº¿n ngÃ y)
- Thá»‘ng kÃª theo tráº¡ng thÃ¡i (Tá»•ng/ÄÃ£ thanh toÃ¡n/Chá» thanh toÃ¡n/ÄÃ£ há»§y)
- Hiá»ƒn thá»‹ tá»•ng doanh thu trong khoáº£ng thá»i gian
- Biá»ƒu Ä‘á»“ Ä‘Æ°á»ng theo ngÃ y (Chart.js)

**Sá»­ dá»¥ng:**

1. Chá»n khoáº£ng thá»i gian cáº§n xem
2. Click "Lá»c"
3. Xem biá»ƒu Ä‘á»“ vÃ  thá»‘ng kÃª

---

### 3. ğŸ’° **BÃ¡o cÃ¡o Doanh thu** (`/admin/report/revenue`)

**Chá»©c nÄƒng:**

- Bá»™ lá»c theo nÄƒm
- Hiá»ƒn thá»‹ tá»•ng doanh thu nÄƒm
- Biá»ƒu Ä‘á»“ cá»™t doanh thu theo 12 thÃ¡ng
- Báº£ng doanh thu theo tá»«ng nhÃ  xe (cÃ³ % vÃ  progress bar)

**PhÃ¢n tÃ­ch:**

- So sÃ¡nh doanh thu cÃ¡c thÃ¡ng trong nÄƒm
- XÃ¡c Ä‘á»‹nh nhÃ  xe cÃ³ doanh thu cao nháº¥t
- PhÃ¢n tÃ­ch tá»· lá»‡ Ä‘Ã³ng gÃ³p cá»§a tá»«ng nhÃ  xe

---

### 4. ğŸ‘¥ **BÃ¡o cÃ¡o NgÆ°á»i dÃ¹ng** (`/admin/report/users`)

**Chá»©c nÄƒng:**

- 4 box thá»‘ng kÃª theo role (KhÃ¡ch hÃ ng/NhÃ¢n viÃªn/Chá»§ xe/Admin)
- Biá»ƒu Ä‘á»“ Ä‘Æ°á»ng ngÆ°á»i dÃ¹ng má»›i theo thÃ¡ng trong nÄƒm
- Top 10 ngÆ°á»i dÃ¹ng tÃ­ch cá»±c nháº¥t (Ä‘áº·t nhiá»u vÃ© nháº¥t)

**Insights:**

- Theo dÃµi tÄƒng trÆ°á»Ÿng ngÆ°á»i dÃ¹ng
- XÃ¡c Ä‘á»‹nh khÃ¡ch hÃ ng VIP
- PhÃ¢n tÃ­ch phÃ¢n bá»‘ role

---

### 5. ğŸ’¬ **BÃ¡o cÃ¡o BÃ¬nh luáº­n** (`/admin/report/comments`)

**Chá»©c nÄƒng:**

- Thá»‘ng kÃª tá»•ng quan (Tá»•ng/ThÃ¡ng nÃ y/ÄÃ£ duyá»‡t/Chá» duyá»‡t)
- Biá»ƒu Ä‘á»“ bÃ¬nh luáº­n theo thÃ¡ng
- Top chuyáº¿n xe cÃ³ nhiá»u bÃ¬nh luáº­n nháº¥t
- PhÃ¢n bá»‘ Ä‘Ã¡nh giÃ¡ sao (1-5 sao)

**Sá»­ dá»¥ng:**

- Theo dÃµi feedback khÃ¡ch hÃ ng
- XÃ¡c Ä‘á»‹nh chuyáº¿n xe Ä‘Æ°á»£c quan tÃ¢m
- PhÃ¢n tÃ­ch má»©c Ä‘á»™ hÃ i lÃ²ng

---

### 6. ğŸ¢ **BÃ¡o cÃ¡o NhÃ  xe** (`/admin/report/operators`)

**Chá»©c nÄƒng:**

- Thá»‘ng kÃª chi tiáº¿t tá»«ng nhÃ  xe:
    - Sá»‘ chuyáº¿n xe
    - Sá»‘ vÃ© bÃ¡n Ä‘Æ°á»£c
    - Doanh thu
    - ÄÃ¡nh giÃ¡ trung bÃ¬nh
    - Sá»‘ bÃ¬nh luáº­n
- Biá»ƒu Ä‘á»“ ngang (horizontal bar) doanh thu cÃ¡c nhÃ  xe
- Tá»•ng doanh thu toÃ n há»‡ thá»‘ng

**PhÃ¢n tÃ­ch:**

- So sÃ¡nh hiá»‡u quáº£ kinh doanh cÃ¡c nhÃ  xe
- XÃ¡c Ä‘á»‹nh Ä‘á»‘i tÃ¡c chiáº¿n lÆ°á»£c
- ÄÃ¡nh giÃ¡ cháº¥t lÆ°á»£ng dá»‹ch vá»¥

---

### 7. ğŸ›£ï¸ **BÃ¡o cÃ¡o Tuyáº¿n Ä‘Æ°á»ng** (`/admin/report/routes`)

**Chá»©c nÄƒng:**

- Top 15 tuyáº¿n Ä‘Æ°á»ng phá»• biáº¿n nháº¥t
- Hiá»ƒn thá»‹:
    - Äiá»ƒm Ä‘i â†’ Äiá»ƒm Ä‘áº¿n
    - Sá»‘ chuyáº¿n
    - Sá»‘ vÃ© Ä‘Ã£ bÃ¡n

**Insights:**

- XÃ¡c Ä‘á»‹nh tuyáº¿n Ä‘Æ°á»ng hot
- Láº­p káº¿ hoáº¡ch má»Ÿ tuyáº¿n má»›i
- Tá»‘i Æ°u lá»‹ch trÃ¬nh

---

### 8. ğŸ“§ **BÃ¡o cÃ¡o LiÃªn há»‡** (`/admin/report/contacts`)

**Chá»©c nÄƒng:**

- Thá»‘ng kÃª tá»•ng quan (Tá»•ng/ThÃ¡ng nÃ y)
- Biá»ƒu Ä‘á»“ liÃªn há»‡ theo thÃ¡ng
- PhÃ¢n bá»‘ liÃªn há»‡ theo chi nhÃ¡nh

**Sá»­ dá»¥ng:**

- Theo dÃµi tÆ°Æ¡ng tÃ¡c khÃ¡ch hÃ ng
- ÄÃ¡nh giÃ¡ hiá»‡u quáº£ chÄƒm sÃ³c
- PhÃ¢n tÃ­ch nhu cáº§u theo khu vá»±c

---

## ğŸ”§ TÃNH NÄ‚NG CHUNG

### Biá»ƒu Ä‘á»“ (Chart.js)

- **Line Chart**: DÃ¹ng cho dá»¯ liá»‡u theo thá»i gian
- **Bar Chart**: So sÃ¡nh cÃ¡c nhÃ³m dá»¯ liá»‡u
- **Horizontal Bar**: DÃ¹ng cho danh sÃ¡ch dÃ i
- Há»— trá»£: Hover tooltips, responsive, animation

### Bá»™ lá»c

- **Theo thá»i gian**: NgÃ y, thÃ¡ng, nÄƒm
- **Theo Ä‘á»‘i tÆ°á»£ng**: NhÃ  xe, ngÆ°á»i dÃ¹ng, chi nhÃ¡nh
- **Khoáº£ng thá»i gian**: Tá»« ngÃ y - Ä‘áº¿n ngÃ y

### Export (Äang phÃ¡t triá»ƒn)

- Excel (.xlsx)
- PDF
- CSV

---

## ğŸ“Š CÃ”NG THá»¨C TÃNH TOÃN

### Doanh thu

```php
Doanh thu = Î£ (Sá»‘ gháº¿ Ã— GiÃ¡ vÃ©)
// Chá»‰ tÃ­nh cÃ¡c vÃ© khÃ´ng bá»‹ há»§y
```

### ÄÃ¡nh giÃ¡ trung bÃ¬nh

```php
ÄÃ¡nh giÃ¡ TB = Î£ Sá»‘ sao / Tá»•ng sá»‘ bÃ¬nh luáº­n Ä‘Ã£ duyá»‡t
```

### Tá»· lá»‡ pháº§n trÄƒm

```php
% = (GiÃ¡ trá»‹ riÃªng / Tá»•ng) Ã— 100
```

---

## ğŸ¨ GIAO DIá»†N

### Theme

- AdminLTE 3
- Bootstrap 4
- Font Awesome icons
- Responsive design

### MÃ u sáº¯c

- **Primary** (Xanh dÆ°Æ¡ng): #007bff - ThÃ´ng tin chÃ­nh
- **Success** (Xanh lÃ¡): #28a745 - Doanh thu, thÃ nh cÃ´ng
- **Warning** (VÃ ng): #ffc107 - Cáº£nh bÃ¡o, chá» xá»­ lÃ½
- **Danger** (Äá»): #dc3545 - Lá»—i, Ä‘Ã£ há»§y
- **Info** (Xanh nháº¡t): #17a2b8 - ThÃ´ng tin bá»• sung

---

## ğŸš€ HÆ¯á»šNG DáºªN Sá»¬ Dá»¤NG

### Truy cáº­p bÃ¡o cÃ¡o

1. ÄÄƒng nháº­p vá»›i role **Admin**
2. VÃ o menu **BÃ¡o cÃ¡o** â†’ **Tá»•ng há»£p**
3. Click vÃ o icon tÆ°Æ¡ng á»©ng Ä‘á»ƒ xem bÃ¡o cÃ¡o chi tiáº¿t

### Lá»c dá»¯ liá»‡u

1. Chá»n bá»™ lá»c (nÄƒm, thÃ¡ng, khoáº£ng thá»i gian)
2. Click nÃºt **Lá»c** hoáº·c **Xem**
3. Káº¿t quáº£ hiá»ƒn thá»‹ tá»©c thÃ¬

### Xem biá»ƒu Ä‘á»“

- Hover chuá»™t lÃªn biá»ƒu Ä‘á»“ Ä‘á»ƒ xem chi tiáº¿t
- Click legend Ä‘á»ƒ áº©n/hiá»‡n dataset
- Biá»ƒu Ä‘á»“ tá»± Ä‘á»™ng responsive

---

## ğŸ” PHÃ‚N QUYá»€N

### Admin

- âœ… Xem táº¥t cáº£ 8 bÃ¡o cÃ¡o
- âœ… Export dá»¯ liá»‡u
- âœ… Truy cáº­p má»i thá»i Ä‘iá»ƒm

### Staff

- âŒ KhÃ´ng cÃ³ quyá»n truy cáº­p bÃ¡o cÃ¡o
- (CÃ³ thá»ƒ má»Ÿ rá»™ng trong tÆ°Æ¡ng lai)

---

## ğŸ“ GHI CHÃš Ká»¸ THUáº¬T

### Controller

- File: `App\Http\Controllers\Admin\ReportController.php`
- Methods: 8 public methods + helper methods
- Database: Tá»‘i Æ°u vá»›i eager loading

### Views

- Folder: `resources/views/AdminLTE/admin/report/`
- Files:
    - `index.blade.php` - Tá»•ng há»£p
    - `bookings.blade.php` - Äáº·t vÃ©
    - `revenue.blade.php` - Doanh thu
    - `users.blade.php` - NgÆ°á»i dÃ¹ng
    - `comments.blade.php` - BÃ¬nh luáº­n (cáº§n táº¡o)
    - `operators.blade.php` - NhÃ  xe
    - `routes.blade.php` - Tuyáº¿n Ä‘Æ°á»ng (cáº§n táº¡o)
    - `contacts.blade.php` - LiÃªn há»‡ (cáº§n táº¡o)

### Routes

```php
Route::get('report', 'index')->name('report.index');
Route::get('report/bookings', 'bookings')->name('report.bookings');
Route::get('report/revenue', 'revenue')->name('report.revenue');
Route::get('report/users', 'users')->name('report.users');
Route::get('report/comments', 'comments')->name('report.comments');
Route::get('report/operators', 'operators')->name('report.operators');
Route::get('report/routes', 'routes')->name('report.routes');
Route::get('report/contacts', 'contacts')->name('report.contacts');
```

---

## ğŸ› TROUBLESHOOTING

### Lá»—i GROUP BY

**Triá»‡u chá»©ng**: SQL error vá» GROUP BY  
**NguyÃªn nhÃ¢n**: MySQL strict mode  
**Giáº£i phÃ¡p**: Liá»‡t kÃª Ä‘áº§y Ä‘á»§ cÃ¡c cá»™t trong GROUP BY

### Lá»—i relationship khÃ´ng tá»“n táº¡i

**Triá»‡u chá»©ng**: Call to undefined relationship  
**NguyÃªn nhÃ¢n**: TÃªn relationship sai  
**Giáº£i phÃ¡p**: Kiá»ƒm tra tÃªn trong model (tramDi, tramDen, nhaXe)

### Biá»ƒu Ä‘á»“ khÃ´ng hiá»ƒn thá»‹

**Triá»‡u chá»©ng**: Canvas trá»‘ng  
**NguyÃªn nhÃ¢n**: Thiáº¿u Chart.js  
**Giáº£i phÃ¡p**: ThÃªm CDN Chart.js vÃ o view

---

## ğŸ¯ TÆ¯Æ NG LAI

### TÃ­nh nÄƒng sáº¯p tá»›i

- [ ] Export PDF/Excel
- [ ] Lá»c nÃ¢ng cao hÆ¡n
- [ ] Real-time updates
- [ ] Email bÃ¡o cÃ¡o tá»± Ä‘á»™ng
- [ ] Dashboard widgets
- [ ] Mobile app reports
- [ ] API endpoints cho third-party

---

**PhÃ¡t triá»ƒn bá»Ÿi**: Your Team  
**Cáº­p nháº­t láº§n cuá»‘i**: {{ date('d/m/Y') }}  
**PhiÃªn báº£n**: 1.0.0
